<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>IaC | markkerry.github.io</title><meta name=keywords content><meta name=description content="My personal site - https://github.com/markkerry/markkerry-hugo"><meta name=author content="Mark kerry"><link rel=canonical href=https://markkerry.github.io/tags/iac/><link crossorigin=anonymous href=/assets/css/stylesheet.3613efbd0b1772781e8f49935e973cae632a7f61471c05b17be155505ccf87b5.css integrity="sha256-NhPvvQsXcngej0mTXpc8rmMqf2FHHAWxe+FVUFzPh7U=" rel="preload stylesheet" as=style><link rel=icon href=https://markkerry.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://markkerry.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://markkerry.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://markkerry.github.io/apple-touch-icon.png><link rel=mask-icon href=https://markkerry.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://markkerry.github.io/tags/iac/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZDLE8M8RG"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XZDLE8M8RG",{anonymize_ip:!1})}</script><meta property="og:title" content="IaC"><meta property="og:description" content="My personal site - https://github.com/markkerry/markkerry-hugo"><meta property="og:type" content="website"><meta property="og:url" content="https://markkerry.github.io/tags/iac/"><meta name=twitter:card content="summary"><meta name=twitter:title content="IaC"><meta name=twitter:description content="My personal site - https://github.com/markkerry/markkerry-hugo"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://markkerry.github.io/ accesskey=h title="markkerry.github.io (Alt + H)">markkerry.github.io</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://markkerry.github.io/about/ title=About><span>About</span></a></li><li><a href=https://markkerry.github.io/archive title=Archive><span>Archive</span></a></li><li><a href=https://markkerry.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://markkerry.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://markkerry.github.io/tags/>Tags</a></div><h1>IaC</h1></header><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://markkerry.github.io/posts/2022/06/terraform-azure-provider/images/cover_hu6691cddeb8b41e38e64eb6367fd0f5e8_62479_360x0_resize_box_3.png 360w ,https://markkerry.github.io/posts/2022/06/terraform-azure-provider/images/cover_hu6691cddeb8b41e38e64eb6367fd0f5e8_62479_480x0_resize_box_3.png 480w ,https://markkerry.github.io/posts/2022/06/terraform-azure-provider/images/cover_hu6691cddeb8b41e38e64eb6367fd0f5e8_62479_720x0_resize_box_3.png 720w ,https://markkerry.github.io/posts/2022/06/terraform-azure-provider/images/cover_hu6691cddeb8b41e38e64eb6367fd0f5e8_62479_1080x0_resize_box_3.png 1080w ,https://markkerry.github.io/posts/2022/06/terraform-azure-provider/images/cover.png 1200w" sizes="(min-width: 768px) 720px, 100vw" src=https://markkerry.github.io/posts/2022/06/terraform-azure-provider/images/cover.png alt width=1200 height=487></figure><header class=entry-header><h2>Terraform Azure Provider</h2></header><div class=entry-content><p>In the following post I will demonstrate getting started with the Terraform Azure Provider. I’ll build the configuration for:
Resource Group Virtual Network Subnet Network Security Group (Allow SSH) NSG Association 2 x Linux Virtual Machines 2 x Network Interface Cards 2 x Public IPs These will all be deployed them from Azure Cloud Shell.
Remote vs Local State A quick note on the Terraform state file… I have decided to create a remote state file, stored in an Azure Storage Account in order to demonstrate the “backend” configuration....</p></div><footer class=entry-footer><span title='2022-06-05 10:01:49 +0000 UTC'>June 5, 2022</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;Mark kerry</footer><a class=entry-link aria-label="post link to Terraform Azure Provider" href=https://markkerry.github.io/posts/2022/06/terraform-azure-provider/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://markkerry.github.io/posts/2022/05/terraform-virtualbox-provider/images/cover_hu1afbcc504ab2aa39499beb0b6a01732b_62198_360x0_resize_box_3.png 360w ,https://markkerry.github.io/posts/2022/05/terraform-virtualbox-provider/images/cover_hu1afbcc504ab2aa39499beb0b6a01732b_62198_480x0_resize_box_3.png 480w ,https://markkerry.github.io/posts/2022/05/terraform-virtualbox-provider/images/cover.png 717w" sizes="(min-width: 768px) 720px, 100vw" src=https://markkerry.github.io/posts/2022/05/terraform-virtualbox-provider/images/cover.png alt width=717 height=338></figure><header class=entry-header><h2>Terraform VirtualBox Provider</h2></header><div class=entry-content><p>In this post I will demonstrate how to deploy 2x Ubuntu Virtual Machines using the Terraform VirtualBox provider, terra-farm
You can install VirtualBox on Ubuntu using this guide. The main.tf file is configured to use a network adapter called vnetbox1, so you need to ensure it is created and set DHCP Server to Enable.
Install Terraform Let’s start by installing Terraform. The following is from the official Terraform documentation:
Add the Terraform gpg key....</p></div><footer class=entry-footer><span title='2022-05-01 10:02:49 +0000 UTC'>May 1, 2022</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Mark kerry</footer><a class=entry-link aria-label="post link to Terraform VirtualBox Provider" href=https://markkerry.github.io/posts/2022/05/terraform-virtualbox-provider/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://markkerry.github.io/posts/2021/08/create-an-azure-container-image/images/cover_huc501710d864ebc8da00905331115064d_46486_360x0_resize_box_3.png 360w ,https://markkerry.github.io/posts/2021/08/create-an-azure-container-image/images/cover_huc501710d864ebc8da00905331115064d_46486_480x0_resize_box_3.png 480w ,https://markkerry.github.io/posts/2021/08/create-an-azure-container-image/images/cover.png 632w" sizes="(min-width: 768px) 720px, 100vw" src=https://markkerry.github.io/posts/2021/08/create-an-azure-container-image/images/cover.png alt width=632 height=439></figure><header class=entry-header><h2>Create and Deploy an Azure Container Instance with Azure Bicep</h2></header><div class=entry-content><p>Using the Go container created in a previous post, in the post I will detail the steps to author and deploy an Azure Container Instance using Azure Bicep. Hosted in a Linux container, the image will be pulled from Docker Hub.
What are Azure Container Instances Azure Container Instances provides basic container functionality for simple solutions with no orchestration. They can be deployed with public accessibility (public IP and FQDN), or deployed to a VNet for private network access....</p></div><footer class=entry-footer><span title='2021-08-22 11:23:45 +0100 +0100'>August 22, 2021</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Mark kerry</footer><a class=entry-link aria-label="post link to Create and Deploy an Azure Container Instance with Azure Bicep" href=https://markkerry.github.io/posts/2021/08/create-an-azure-container-image/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://markkerry.github.io/posts/2021/08/azure-arm-templates-part-4-custom-deployment/images/cover_hu9f49b236db2d55029736233e7207b244_39367_360x0_resize_box_3.png 360w ,https://markkerry.github.io/posts/2021/08/azure-arm-templates-part-4-custom-deployment/images/cover_hu9f49b236db2d55029736233e7207b244_39367_480x0_resize_box_3.png 480w ,https://markkerry.github.io/posts/2021/08/azure-arm-templates-part-4-custom-deployment/images/cover_hu9f49b236db2d55029736233e7207b244_39367_720x0_resize_box_3.png 720w ,https://markkerry.github.io/posts/2021/08/azure-arm-templates-part-4-custom-deployment/images/cover.png 742w" sizes="(min-width: 768px) 720px, 100vw" src=https://markkerry.github.io/posts/2021/08/azure-arm-templates-part-4-custom-deployment/images/cover.png alt width=742 height=297></figure><header class=entry-header><h2>Azure ARM Templates - Part 4: Azure Portal Custom Deployment</h2></header><div class=entry-content><p>In my previous posts I walked through the process to author ARM templates using VS Code and the Azure Resource Manager (ARM) Tools extension. In this post I will walk through the process to author ARM templates from scratch using the Azure portal’s Custom Deployment feature. It’s handy for getting started with ARM template authoring, but as you will see below, creates resources with old API versions, bloats the variables element, and creates the variables element at the bottom of the template....</p></div><footer class=entry-footer><span title='2021-08-01 12:03:23 +0100 +0100'>August 1, 2021</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Mark kerry</footer><a class=entry-link aria-label="post link to Azure ARM Templates - Part 4: Azure Portal Custom Deployment" href=https://markkerry.github.io/posts/2021/08/azure-arm-templates-part-4-custom-deployment/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://markkerry.github.io/posts/2021/07/azure-arm-templates-part-3-deployment/images/cover_hua0a4c3bbf7eb11702eff01adcd365f7c_18751_360x0_resize_box_3.png 360w ,https://markkerry.github.io/posts/2021/07/azure-arm-templates-part-3-deployment/images/cover_hua0a4c3bbf7eb11702eff01adcd365f7c_18751_480x0_resize_box_3.png 480w ,https://markkerry.github.io/posts/2021/07/azure-arm-templates-part-3-deployment/images/cover.png 520w" sizes="(min-width: 768px) 720px, 100vw" src=https://markkerry.github.io/posts/2021/07/azure-arm-templates-part-3-deployment/images/cover.png alt width=520 height=271></figure><header class=entry-header><h2>Azure ARM Templates - Part 3: Deployment</h2></header><div class=entry-content><p>In the third and final post of this series I’ll quickly cover the process to deploy the ARM template with PowerShell
Deploy Open PowerShell and change directory to the location of your ARM template and parameter files. Then complete the following commands to connect to Azure and create a Resource Group to deploy the resources to:
# Import the Azure Az PowerShell Module Import-Module -Name Az # Connect to Azure and authenticate Connect-AzAccount # Create the Resource Group New-AzResourceGroup -Name "rg-eu-vm" -Location "westeurope" Once the Resource Group has been created it’s time to deploy the resources using the New-AzResourceGroupDeployment cmdlet....</p></div><footer class=entry-footer><span title='2021-07-04 12:55:22 +0100 +0100'>July 4, 2021</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Mark kerry</footer><a class=entry-link aria-label="post link to Azure ARM Templates - Part 3: Deployment" href=https://markkerry.github.io/posts/2021/07/azure-arm-templates-part-3-deployment/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://markkerry.github.io/posts/2021/07/azure-arm-templates-part-2-testing/images/cover_hu982d4e825f3c4787d83bcb8388542dbc_22917_360x0_resize_box_3.png 360w ,https://markkerry.github.io/posts/2021/07/azure-arm-templates-part-2-testing/images/cover_hu982d4e825f3c4787d83bcb8388542dbc_22917_480x0_resize_box_3.png 480w ,https://markkerry.github.io/posts/2021/07/azure-arm-templates-part-2-testing/images/cover.png 662w" sizes="(min-width: 768px) 720px, 100vw" src=https://markkerry.github.io/posts/2021/07/azure-arm-templates-part-2-testing/images/cover.png alt width=662 height=346></figure><header class=entry-header><h2>Azure ARM Templates - Part 2: Testing</h2></header><div class=entry-content><p>Following on from authoring the Azure ARM Templates - Part 1: Development post, in this one I will cover testing the ARM template.
Two potential ways to test the ARM templates is by manually building a Pester test, and another is by using Microsoft’s Azure Resource Manager Template Toolkit (arm-ttk) module.
You can run local tests against ARM templates using PowerShell - which I will demonstrate in the post - but most commonly template testing and validating is used during a CI pipeline....</p></div><footer class=entry-footer><span title='2021-07-03 15:50:08 +0100 +0100'>July 3, 2021</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Mark kerry</footer><a class=entry-link aria-label="post link to Azure ARM Templates - Part 2: Testing" href=https://markkerry.github.io/posts/2021/07/azure-arm-templates-part-2-testing/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://markkerry.github.io/posts/2021/06/azure-arm-templates-part-1-development/images/cover_hu296d7d87b3997f3cd695fbfc7bef4d9f_19198_360x0_resize_box_3.png 360w ,https://markkerry.github.io/posts/2021/06/azure-arm-templates-part-1-development/images/cover_hu296d7d87b3997f3cd695fbfc7bef4d9f_19198_480x0_resize_box_3.png 480w ,https://markkerry.github.io/posts/2021/06/azure-arm-templates-part-1-development/images/cover_hu296d7d87b3997f3cd695fbfc7bef4d9f_19198_720x0_resize_box_3.png 720w ,https://markkerry.github.io/posts/2021/06/azure-arm-templates-part-1-development/images/cover.png 777w" sizes="(min-width: 768px) 720px, 100vw" src=https://markkerry.github.io/posts/2021/06/azure-arm-templates-part-1-development/images/cover.png alt width=777 height=328></figure><header class=entry-header><h2>Azure ARM Templates - Part 1: Development</h2></header><div class=entry-content><p>In the first of this three part series of posts, I will breakdown the components of an Azure ARM template, and the tools used to develop one. Then in part two I will cover testing an ARM template. And finally in part three, I will cover deploying the resources in the ARM template to Azure.
The ARM template will consist of the following resources:
Windows VM Network Interface Public IP Virtual Network Network Security Group Storage Account Getting Started Before looking at Bicep, Terraform or Pulumi, I think it’s important to get to know the process of developing Azure ARM templates from scratch....</p></div><footer class=entry-footer><span title='2021-06-27 13:05:17 +0100 +0100'>June 27, 2021</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Mark kerry</footer><a class=entry-link aria-label="post link to Azure ARM Templates - Part 1: Development" href=https://markkerry.github.io/posts/2021/06/azure-arm-templates-part-1-development/></a></article></main><footer class=footer><span>&copy; 2023 <a href=https://markkerry.github.io/>markkerry.github.io</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>