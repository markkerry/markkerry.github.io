<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Quick How-to: Push/Pull to Azure Container Registry | markkerry.github.io</title>
<meta name=keywords content="Docker,Azure,Azure Container Registry">
<meta name=description content="In this post I will detail the quick steps to push and pull a Docker container image from an Azure Container Registry.
Using my Go app, I stopped at building the container and continued from here:
Create the Azure Container Registry In the Azure portal, browse to the resource group of your choice or create a new one.
Select Create > Containers > Container Registry
I specified the following:
 Subscription Resource group Registry Name: acrmkmdsn Location: UK South Availability zones: Disabled SKU: Standard  Leave the rest as default and continue on to Create.">
<meta name=author content="Mark kerry">
<link rel=canonical href=https://markkerry.github.io/posts/2022/02/acr-push-pull/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.b9ff4cc257e914dab489bd18086151800e18f91456a5174bf28489210227a659.css integrity="sha256-uf9MwlfpFNq0ib0YCGFRgA4Y+RRWpRdL8oSJIQInplk=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://markkerry.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://markkerry.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://markkerry.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=https://markkerry.github.io/apple-touch-icon.png>
<link rel=mask-icon href=https://markkerry.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.92.2">
<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','')</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XZDLE8M8RG"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-XZDLE8M8RG',{anonymize_ip:!1})}</script>
<meta property="og:title" content="Quick How-to: Push/Pull to Azure Container Registry">
<meta property="og:description" content="In this post I will detail the quick steps to push and pull a Docker container image from an Azure Container Registry.
Using my Go app, I stopped at building the container and continued from here:
Create the Azure Container Registry In the Azure portal, browse to the resource group of your choice or create a new one.
Select Create > Containers > Container Registry
I specified the following:
 Subscription Resource group Registry Name: acrmkmdsn Location: UK South Availability zones: Disabled SKU: Standard  Leave the rest as default and continue on to Create.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://markkerry.github.io/posts/2022/02/acr-push-pull/">
<meta property="og:image" content="https://markkerry.github.io/images/cover.svg"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2022-02-20T11:27:17+00:00">
<meta property="article:modified_time" content="2022-02-20T11:27:17+00:00">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://markkerry.github.io/images/cover.svg">
<meta name=twitter:title content="Quick How-to: Push/Pull to Azure Container Registry">
<meta name=twitter:description content="In this post I will detail the quick steps to push and pull a Docker container image from an Azure Container Registry.
Using my Go app, I stopped at building the container and continued from here:
Create the Azure Container Registry In the Azure portal, browse to the resource group of your choice or create a new one.
Select Create > Containers > Container Registry
I specified the following:
 Subscription Resource group Registry Name: acrmkmdsn Location: UK South Availability zones: Disabled SKU: Standard  Leave the rest as default and continue on to Create.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://markkerry.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Quick How-to: Push/Pull to Azure Container Registry","item":"https://markkerry.github.io/posts/2022/02/acr-push-pull/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Quick How-to: Push/Pull to Azure Container Registry","name":"Quick How-to: Push\/Pull to Azure Container Registry","description":"In this post I will detail the quick steps to push and pull a Docker container image from an Azure Container Registry.\nUsing my Go app, I stopped at building the container and continued from here:\nCreate the Azure Container Registry In the Azure portal, browse to the resource group of your choice or create a new one.\nSelect Create \u0026gt; Containers \u0026gt; Container Registry\nI specified the following:\n Subscription Resource group Registry Name: acrmkmdsn Location: UK South Availability zones: Disabled SKU: Standard  Leave the rest as default and continue on to Create.","keywords":["Docker","Azure","Azure Container Registry"],"articleBody":"In this post I will detail the quick steps to push and pull a Docker container image from an Azure Container Registry.\nUsing my Go app, I stopped at building the container and continued from here:\nCreate the Azure Container Registry In the Azure portal, browse to the resource group of your choice or create a new one.\nSelect Create  Containers  Container Registry\nI specified the following:\n Subscription Resource group Registry Name: acrmkmdsn Location: UK South Availability zones: Disabled SKU: Standard  Leave the rest as default and continue on to Create.\nGo to the newly created resource and note the Login server is acrmkmdsn.azurecr.io\nCreate an Admin User for the Container Registry Open the resource and under Settings select Access Keys\nChange the Admin user from Disabled to Enabled. Copy the username and one of the passwords.\nLogin to the Container Registry To login to the container registry from the Docker, I ran the following:\ndocker login acrmkmdsn.azurecr.io Enter the username and password from the previous step.\nBuild and Tag the Container In the root directory of the dockerfile, I built the container image.\ndocker build -t go-app . Then I tagged it with the name of go-app and the new container registry\ndocker tag go-app acrmkmdsn.azurecr.io/go-app Push the Container to the Registry To push the container to the registry, complete as follows\ndocker push acrmkmdsn.azurecr.io/go-app Back in the Azure portal, under Services select Repositories. Here you can see the newly pushed go-app repo.\nAnd if you select it you can see the go-app:latest image.\nPull the Container Images from the ACR To pull the image from the Azure Container Registry:\ndocker pull acrmkmdsn.azurecr.io/go-app:latest I can then run the container (and remove on stop) as follows:\ndocker run -d --rm -p 3000:3000 --name go-app acrmkmdsn.azurecr.io/go-app Can test it is running as expected:\ncurl localhost:3000 I then ran the following to see that it is running from the ACR image:\ndocker container ls And finally, I can stop the container (which will also remove the container but not the local image) as follows:\ndocker container stop go-app ","wordCount":"348","inLanguage":"en","image":"https://markkerry.github.io/images/cover.svg","datePublished":"2022-02-20T11:27:17Z","dateModified":"2022-02-20T11:27:17Z","author":{"@type":"Person","name":"Mark kerry"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://markkerry.github.io/posts/2022/02/acr-push-pull/"},"publisher":{"@type":"Organization","name":"markkerry.github.io","logo":{"@type":"ImageObject","url":"https://markkerry.github.io/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<noscript>
<style type=text/css>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://markkerry.github.io/ accesskey=h title="markkerry.github.io (Alt + H)">markkerry.github.io</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://markkerry.github.io/about/ title=About>
<span>About</span>
</a>
</li>
<li>
<a href=https://markkerry.github.io/archive title=Archive>
<span>Archive</span>
</a>
</li>
<li>
<a href=https://markkerry.github.io/tags/ title=Tags>
<span>Tags</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://markkerry.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://markkerry.github.io/posts/>Posts</a></div>
<h1 class=post-title>
Quick How-to: Push/Pull to Azure Container Registry
</h1>
<div class=post-meta>February 20, 2022&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Mark kerry
</div>
</header>
<figure class=entry-cover>
<img loading=lazy src=https://markkerry.github.io/posts/2022/02/acr-push-pull/images/cover.svg alt>
<p>Learn how to push and pull Docker images to Azure Container Registry</p>
</figure><div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<div class=details>Table of Contents</div>
</summary>
<div class=inner><ul>
<li>
<a href=#create-the-azure-container-registry aria-label="Create the Azure Container Registry">Create the Azure Container Registry</a></li>
<li>
<a href=#create-an-admin-user-for-the-container-registry aria-label="Create an Admin User for the Container Registry">Create an Admin User for the Container Registry</a></li>
<li>
<a href=#login-to-the-container-registry aria-label="Login to the Container Registry">Login to the Container Registry</a></li>
<li>
<a href=#build-and-tag-the-container aria-label="Build and Tag the Container">Build and Tag the Container</a></li>
<li>
<a href=#push-the-container-to-the-registry aria-label="Push the Container to the Registry">Push the Container to the Registry</a></li>
<li>
<a href=#pull-the-container-images-from-the-acr aria-label="Pull the Container Images from the ACR">Pull the Container Images from the ACR</a>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><p>In this post I will detail the quick steps to push and pull a Docker container image from an Azure Container Registry.</p>
<p>Using my <a href=https://markkerry.github.io/posts/2021/03/docker-go-web-app/>Go app</a>, I stopped at building the container and continued from here:</p>
<h2 id=create-the-azure-container-registry>Create the Azure Container Registry<a hidden class=anchor aria-hidden=true href=#create-the-azure-container-registry>#</a></h2>
<p>In the Azure portal, browse to the resource group of your choice or create a new one.</p>
<p>Select Create > Containers > Container Registry</p>
<p>I specified the following:</p>
<ul>
<li>Subscription</li>
<li>Resource group</li>
<li>Registry Name: acrmkmdsn</li>
<li>Location: UK South</li>
<li>Availability zones: Disabled</li>
<li>SKU: Standard</li>
</ul>
<p>Leave the rest as default and continue on to <strong>Create</strong>.</p>
<p>Go to the newly created resource and note the <strong>Login server</strong> is <code>acrmkmdsn.azurecr.io</code></p>
<h2 id=create-an-admin-user-for-the-container-registry>Create an Admin User for the Container Registry<a hidden class=anchor aria-hidden=true href=#create-an-admin-user-for-the-container-registry>#</a></h2>
<p>Open the resource and under <strong>Settings</strong> select <strong>Access Keys</strong></p>
<p><img loading=lazy src=images/accessKeyOff.png alt=accessKeyOff>
</p>
<p>Change the <strong>Admin user</strong> from Disabled to <strong>Enabled</strong>. Copy the username and one of the passwords.</p>
<p><img loading=lazy src=images/accessKeyOn.png alt=accessKeyOn>
</p>
<h2 id=login-to-the-container-registry>Login to the Container Registry<a hidden class=anchor aria-hidden=true href=#login-to-the-container-registry>#</a></h2>
<p>To login to the container registry from the Docker, I ran the following:</p>
<pre tabindex=0><code class=language-terminal data-lang=terminal>docker login acrmkmdsn.azurecr.io
</code></pre><p>Enter the username and password from the previous step.</p>
<p><img loading=lazy src=images/dockerLogin.png alt=dockerLogin>
</p>
<h2 id=build-and-tag-the-container>Build and Tag the Container<a hidden class=anchor aria-hidden=true href=#build-and-tag-the-container>#</a></h2>
<p>In the root directory of the <code>dockerfile</code>, I built the container image.</p>
<pre tabindex=0><code class=language-terminal data-lang=terminal>docker build -t go-app .
</code></pre><p>Then I tagged it with the name of <code>go-app</code> and the new container registry</p>
<pre tabindex=0><code class=language-terminal data-lang=terminal>docker tag go-app acrmkmdsn.azurecr.io/go-app
</code></pre><h2 id=push-the-container-to-the-registry>Push the Container to the Registry<a hidden class=anchor aria-hidden=true href=#push-the-container-to-the-registry>#</a></h2>
<p>To push the container to the registry, complete as follows</p>
<pre tabindex=0><code class=language-terminal data-lang=terminal>docker push acrmkmdsn.azurecr.io/go-app
</code></pre><p><img loading=lazy src=images/dockerPush.png alt=dockerPush>
</p>
<p>Back in the Azure portal, under <strong>Services</strong> select <strong>Repositories</strong>. Here you can see the newly pushed <code>go-app</code> repo.</p>
<p><img loading=lazy src=images/repo.png alt=repo>
</p>
<p>And if you select it you can see the <code>go-app:latest</code> image.</p>
<p><img loading=lazy src=images/latest.png alt=latest>
</p>
<h2 id=pull-the-container-images-from-the-acr>Pull the Container Images from the ACR<a hidden class=anchor aria-hidden=true href=#pull-the-container-images-from-the-acr>#</a></h2>
<p>To pull the image from the Azure Container Registry:</p>
<pre tabindex=0><code class=language-terminal data-lang=terminal>docker pull acrmkmdsn.azurecr.io/go-app:latest
</code></pre><p><img loading=lazy src=images/dockerPull.png alt=dockerPull>
</p>
<p>I can then run the container (and remove on stop) as follows:</p>
<pre tabindex=0><code class=language-terminal data-lang=terminal>docker run -d --rm -p 3000:3000 --name go-app acrmkmdsn.azurecr.io/go-app
</code></pre><p>Can test it is running as expected:</p>
<pre tabindex=0><code class=language-teminal data-lang=teminal>curl localhost:3000
</code></pre><p><img loading=lazy src=images/dockerRunCurl.png alt=dockerRunCurl>
</p>
<p>I then ran the following to see that it is running from the ACR image:</p>
<pre tabindex=0><code class=language-terminal data-lang=terminal>docker container ls
</code></pre><p><img loading=lazy src=images/dockerContainer.png alt=dockerContainer>
</p>
<p>And finally, I can stop the container (which will also remove the container but not the local image) as follows:</p>
<pre tabindex=0><code class=language-terminal data-lang=terminal>docker container stop go-app
</code></pre>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://markkerry.github.io/tags/docker/>Docker</a></li>
<li><a href=https://markkerry.github.io/tags/azure/>Azure</a></li>
<li><a href=https://markkerry.github.io/tags/azure-container-registry/>Azure Container Registry</a></li>
</ul>
<nav class=paginav>
<a class=next href=https://markkerry.github.io/posts/2022/02/ubuntu-server-lab/>
<span class=title>Next Page »</span>
<br>
<span>Ubuntu Server 20.04 LTS Lab</span>
</a>
</nav>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2022 <a href=https://markkerry.github.io/>markkerry.github.io</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)">
<button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</button>
</a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>