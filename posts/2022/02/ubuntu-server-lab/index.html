<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Ubuntu Server 20.04 LTS VirtualBox Lab | markkerry.github.io</title><meta name=keywords content="Linux,Ubuntu,VirtualBox"><meta name=description content="This is a follow on from my old Centos 8 post, but this time I will be using Ubuntu LTS servers running on a Linux host with VirtualBox. The lab environment is designed to be used for any of the following:
 General Linux sysadmin Kubernetes cluster Ansible configuration management Terraform VirtualBox Provider  This post will cover of the following:
 Installing & configuring VirtualBox Installing & configuring the adminbox server  The adminbox server will have a bridged adapter to the host and will be used to SSH onto the other VMs via the VirtualBox NAT network."><meta name=author content="Mark kerry"><link rel=canonical href=https://markkerry.github.io/posts/2022/02/ubuntu-server-lab/><link crossorigin=anonymous href=/assets/css/stylesheet.min.b9ff4cc257e914dab489bd18086151800e18f91456a5174bf28489210227a659.css integrity="sha256-uf9MwlfpFNq0ib0YCGFRgA4Y+RRWpRdL8oSJIQInplk=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.4dcb3c4f38462f66c6b6137227726f5543cb934cca9788f041c087e374491df2.js integrity="sha256-Tcs8TzhGL2bGthNyJ3JvVUPLk0zKl4jwQcCH43RJHfI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://markkerry.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://markkerry.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://markkerry.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://markkerry.github.io/apple-touch-icon.png><link rel=mask-icon href=https://markkerry.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.96.0"><script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config",'')</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZDLE8M8RG"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XZDLE8M8RG",{anonymize_ip:!1})}</script><meta property="og:title" content="Ubuntu Server 20.04 LTS VirtualBox Lab"><meta property="og:description" content="This is a follow on from my old Centos 8 post, but this time I will be using Ubuntu LTS servers running on a Linux host with VirtualBox. The lab environment is designed to be used for any of the following:
 General Linux sysadmin Kubernetes cluster Ansible configuration management Terraform VirtualBox Provider  This post will cover of the following:
 Installing & configuring VirtualBox Installing & configuring the adminbox server  The adminbox server will have a bridged adapter to the host and will be used to SSH onto the other VMs via the VirtualBox NAT network."><meta property="og:type" content="article"><meta property="og:url" content="https://markkerry.github.io/posts/2022/02/ubuntu-server-lab/"><meta property="og:image" content="https://markkerry.github.io/images/cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-02-13T09:10:46+00:00"><meta property="article:modified_time" content="2022-02-13T09:10:46+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://markkerry.github.io/images/cover.png"><meta name=twitter:title content="Ubuntu Server 20.04 LTS VirtualBox Lab"><meta name=twitter:description content="This is a follow on from my old Centos 8 post, but this time I will be using Ubuntu LTS servers running on a Linux host with VirtualBox. The lab environment is designed to be used for any of the following:
 General Linux sysadmin Kubernetes cluster Ansible configuration management Terraform VirtualBox Provider  This post will cover of the following:
 Installing & configuring VirtualBox Installing & configuring the adminbox server  The adminbox server will have a bridged adapter to the host and will be used to SSH onto the other VMs via the VirtualBox NAT network."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://markkerry.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Ubuntu Server 20.04 LTS VirtualBox Lab","item":"https://markkerry.github.io/posts/2022/02/ubuntu-server-lab/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Ubuntu Server 20.04 LTS VirtualBox Lab","name":"Ubuntu Server 20.04 LTS VirtualBox Lab","description":"This is a follow on from my old Centos 8 post, but this time I will be using Ubuntu LTS servers running on a Linux host with VirtualBox. The lab environment is designed to be used for any of the following:\n General Linux sysadmin Kubernetes cluster Ansible configuration management Terraform VirtualBox Provider  This post will cover of the following:\n Installing \u0026amp; configuring VirtualBox Installing \u0026amp; configuring the adminbox server  The adminbox server will have a bridged adapter to the host and will be used to SSH onto the other VMs via the VirtualBox NAT network.","keywords":["Linux","Ubuntu","VirtualBox"],"articleBody":"This is a follow on from my old Centos 8 post, but this time I will be using Ubuntu LTS servers running on a Linux host with VirtualBox. The lab environment is designed to be used for any of the following:\n General Linux sysadmin Kubernetes cluster Ansible configuration management Terraform VirtualBox Provider  This post will cover of the following:\n Installing \u0026 configuring VirtualBox Installing \u0026 configuring the adminbox server  The adminbox server will have a bridged adapter to the host and will be used to SSH onto the other VMs via the VirtualBox NAT network. The whole solution will eventually consist of the following:\n network address: 10.0.2.0/24 default gateway: 10.0.2.2 7 virtual machines     server ip addr comment     adminbox 10.0.2.5 Jump box from host with SSH access to all on the Nat network   ctrlplane 10.0.2.10 Kubernetes Control Plane server   node1 10.0.2.11 Kubernetes worker node 1   node2 10.0.2.12 Kubernetes worker node 2   lb1 10.0.2.20 Load Balancer configured by Ansible   web1 10.0.2.21 Web Server 1 configured by Ansible   web2 10.0.2.22 Web Server 2 configured by Ansible    Install VirtualBox 6.1 To install VirtualBox on an Ubuntu host, open the terminal and enter the following:\nwget -q https://www.virtualbox.org/download/oracle_vbox_2016.asc -O- | sudo apt-key add -  sudo add-apt-repository \"deb [arch=amd64] http://download.virtualbox.org/virtualbox/debian $(lsb_release -cs)contrib\"  sudo apt update \u0026\u0026 sudo apt install virtualbox-6.1 -y Configure VirtualBox First I had to create a Nat Network by opening VirtualBox, selecting Tools  Preferences  Network. And then click the add new nat network button.\nI named mine KubeNatNetwork as I plan to use it for a Kubernetes cluster.\nCreate a new Virtual Machine with the following:\n Name: adminbox Select the machine folder or leave as default Type: Linux Version: Ubuntu (64-bit) Memory size: 2048 Hard disk file type: VDI Storage on Physical hard disk: Dynamically allocated Size: 20 GB  Once you have created adminbox, select it and click Settings  Network  Adapter 1\n Attached to: NAT Network Name: KubeNatNetwork  Settings  Network  Adapter 2\n Attached to: Bridged adapter Name: wlo1  Install Ubuntu Download the latest version of Ubuntu server from here, and then complete the following:\n Power on adminbox and when prompted, browse to the Ubuntu iso you just downloaded and click Start Select the language Choose whether to update to the new installer or not (I do) Select the keyboard layout The ethernet adapter enp0s3, weâ€™ll want to set a static IP for. You can complete this now or later. To do now continue as follows  Edit IPv4  Manual Subnet: 10.0.2.0/24 Address: 10.0.2.5 Gateway: 10.0.2.2 Name servers: 8.8.8.8 Search Domains: Leave blank    Leave the proxy address blank Leave the Mirror address as is Select to use the entire disk and confirm to contine the install process Enter your name The server name of adminbox And then enter a username and password Select to Install OpenSSH server Do not select any other Feature Server Snaps Reboot the server once complete   Note: You may want to shutdown the server upon first boot due to unmount /cdrom errors.\n Update Ubuntu Once you have booted up and logged into Ubuntu for the first time, update it as follows:\nsudo apt update \u0026\u0026 sudo apt install -y Set Static IP If you skipped the part to configure the static IP in the setup, it can be done from within the Ubuntu terminal as follows:\n# Get the name of the adapter ip link  # Get the name of the yml in netplan ls /etc/netplan  # Get the contents of it cat /etc/netplan/00-installer-config.yml This is what the yml file will show if it is set to dhcp. Adapter enp0s3 is the Nat adapter and enp0s8 is the adapter which is bridged to the host.\n# This is the network config written by 'subiquity' network:  ethernets:  enp0s3:  dhcp4: true  enp0s8:  dhcp4: true  version: 2 Change it with vi, vim, or nano\nsudo vi /etc/netplan/00-installer-config.yml And fill in as follows (Be careful to use proper indentation):\n# This is the network config written by 'subiquity' network:  ethernets:  enp0s3:  addresses:  - 10.0.2.5/24  gateway4: 10.0.2.2  nameservers:  addresses:  - 8.8.8.8  - 8.8.8.8  search: []  enp0s8:  dhcp4: true  version: 2 Save and exit the text editor, then type the following to apply the changes:\nsudo netplan apply Get the ip addresses by typing the following command:\nip addr show Update the hosts File Updating the hosts files on your local machine allows for communication over hostname rather than IP address. Change the hosts file on your local machine as follows:\nsudo vi /etc/hosts Add the ip address for your enp0s8 adapter which you can get from the ip addr show command:\n# adminbox ip 192.168.178.93 adminbox Generate a SSH Key Pair To enable us to easily access the adminbox from the host OS for system administration, we can easily setup a SSH key-pair as follows:\nFrom the host OS, create the ssh key-pair as follows:\nssh-keygen -t rsa -b 4096 Press Enter to accept the key to be saved in ~/.ssh and do not specify a passphrase. Then use the following command to copy to adminbox:\nssh-copy-id mark@adminbox  Note: mark is my username\n Test by connecting to the machine via SSH:\nssh mark@adminbox Summary Weâ€™ve now successfully built the adminbox server in VirtualBox, have updated it and can SSH onto it. This will allow us access from the host machine, access to the internet, and access to future VMs created in the NAT network.\nThat concludes part 1 of this series.\n","wordCount":"902","inLanguage":"en","image":"https://markkerry.github.io/images/cover.png","datePublished":"2022-02-13T09:10:46Z","dateModified":"2022-02-13T09:10:46Z","author":{"@type":"Person","name":"Mark kerry"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://markkerry.github.io/posts/2022/02/ubuntu-server-lab/"},"publisher":{"@type":"Organization","name":"markkerry.github.io","logo":{"@type":"ImageObject","url":"https://markkerry.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://markkerry.github.io/ accesskey=h title="markkerry.github.io (Alt + H)">markkerry.github.io</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://markkerry.github.io/about/ title=About><span>About</span></a></li><li><a href=https://markkerry.github.io/archive title=Archive><span>Archive</span></a></li><li><a href=https://markkerry.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://markkerry.github.io/>Home</a>&nbsp;Â»&nbsp;<a href=https://markkerry.github.io/posts/>Posts</a></div><h1 class=post-title>Ubuntu Server 20.04 LTS VirtualBox Lab</h1><div class=post-meta>February 13, 2022&nbsp;Â·&nbsp;5 min&nbsp;Â·&nbsp;Mark kerry</div></header><figure class=entry-cover><img loading=lazy srcset="https://markkerry.github.io/posts/2022/02/ubuntu-server-lab/images/cover_hu9a8cc3c6eb196a4976206cf5a7679f66_61032_360x0_resize_box_3.png 360w ,https://markkerry.github.io/posts/2022/02/ubuntu-server-lab/images/cover_hu9a8cc3c6eb196a4976206cf5a7679f66_61032_480x0_resize_box_3.png 480w ,https://markkerry.github.io/posts/2022/02/ubuntu-server-lab/images/cover.png 702w" sizes="(min-width: 768px) 720px, 100vw" src=https://markkerry.github.io/posts/2022/02/ubuntu-server-lab/images/cover.png alt width=702 height=336><p>Build an Ubuntu Linux lab for Sysadmin, Kubernetes and Ansible</p></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner><ul><li><a href=#install-virtualbox-61 aria-label="Install VirtualBox 6.1">Install VirtualBox 6.1</a></li><li><a href=#configure-virtualbox aria-label="Configure VirtualBox">Configure VirtualBox</a></li><li><a href=#install-ubuntu aria-label="Install Ubuntu">Install Ubuntu</a></li><li><a href=#update-ubuntu aria-label="Update Ubuntu">Update Ubuntu</a></li><li><a href=#set-static-ip aria-label="Set Static IP">Set Static IP</a></li><li><a href=#update-the-hosts-file aria-label="Update the hosts File">Update the hosts File</a></li><li><a href=#generate-a-ssh-key-pair aria-label="Generate a SSH Key Pair">Generate a SSH Key Pair</a></li><li><a href=#summary aria-label=Summary>Summary</a></li></ul></div></details></div><div class=post-content><p>This is a follow on from my old <a href=https://markkerry.github.io/posts/2021/05/centos8-setup/>Centos 8 post</a>, but this time I will be using Ubuntu LTS servers running on a Linux host with VirtualBox. The lab environment is designed to be used for any of the following:</p><ul><li>General Linux sysadmin</li><li>Kubernetes cluster</li><li>Ansible configuration management</li><li>Terraform VirtualBox Provider</li></ul><p>This post will cover of the following:</p><ul><li>Installing & configuring VirtualBox</li><li>Installing & configuring the adminbox server</li></ul><p>The adminbox server will have a bridged adapter to the host and will be used to SSH onto the other VMs via the VirtualBox NAT network. The whole solution will eventually consist of the following:</p><ul><li>network address: 10.0.2.0/24</li><li>default gateway: 10.0.2.2</li><li>7 virtual machines</li></ul><table><thead><tr><th>server</th><th>ip addr</th><th>comment</th></tr></thead><tbody><tr><td>adminbox</td><td>10.0.2.5</td><td>Jump box from host with SSH access to all on the Nat network</td></tr><tr><td>ctrlplane</td><td>10.0.2.10</td><td>Kubernetes Control Plane server</td></tr><tr><td>node1</td><td>10.0.2.11</td><td>Kubernetes worker node 1</td></tr><tr><td>node2</td><td>10.0.2.12</td><td>Kubernetes worker node 2</td></tr><tr><td>lb1</td><td>10.0.2.20</td><td>Load Balancer configured by Ansible</td></tr><tr><td>web1</td><td>10.0.2.21</td><td>Web Server 1 configured by Ansible</td></tr><tr><td>web2</td><td>10.0.2.22</td><td>Web Server 2 configured by Ansible</td></tr></tbody></table><h2 id=install-virtualbox-61>Install VirtualBox 6.1<a hidden class=anchor aria-hidden=true href=#install-virtualbox-61>#</a></h2><p>To install VirtualBox on an Ubuntu host, open the terminal and enter the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wget -q https://www.virtualbox.org/download/oracle_vbox_2016.asc -O- | sudo apt-key add -
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo add-apt-repository <span style=color:#e6db74>&#34;deb [arch=amd64] http://download.virtualbox.org/virtualbox/debian </span><span style=color:#66d9ef>$(</span>lsb_release -cs<span style=color:#66d9ef>)</span><span style=color:#e6db74> contrib&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo apt update <span style=color:#f92672>&amp;&amp;</span> sudo apt install virtualbox-6.1 -y
</span></span></code></pre></div><h2 id=configure-virtualbox>Configure VirtualBox<a hidden class=anchor aria-hidden=true href=#configure-virtualbox>#</a></h2><p>First I had to create a Nat Network by opening VirtualBox, selecting Tools > Preferences > Network. And then click the add new nat network button.</p><p>I named mine <strong>KubeNatNetwork</strong> as I plan to use it for a Kubernetes cluster.</p><p><img loading=lazy src=images/NatNet1.png alt=NatNet1></p><p>Create a new Virtual Machine with the following:</p><ul><li><strong>Name</strong>: adminbox</li><li>Select the machine folder or leave as default</li><li><strong>Type</strong>: Linux</li><li><strong>Version</strong>: Ubuntu (64-bit)</li><li><strong>Memory size</strong>: 2048</li><li><strong>Hard disk file type</strong>: VDI</li><li><strong>Storage on Physical hard disk</strong>: Dynamically allocated</li><li><strong>Size</strong>: 20 GB</li></ul><p>Once you have created adminbox, select it and click Settings > Network > <strong>Adapter 1</strong></p><ul><li><strong>Attached to</strong>: NAT Network</li><li><strong>Name</strong>: KubeNatNetwork</li></ul><p><img loading=lazy src=images/NatNet2.png alt=NatNet2></p><p>Settings > Network > <strong>Adapter 2</strong></p><ul><li><strong>Attached to</strong>: Bridged adapter</li><li><strong>Name</strong>: wlo1</li></ul><p><img loading=lazy src=images/NatNet3.png alt=NatNet3></p><h2 id=install-ubuntu>Install Ubuntu<a hidden class=anchor aria-hidden=true href=#install-ubuntu>#</a></h2><p>Download the latest version of Ubuntu server from <a href=https://ubuntu.com/download/server>here</a>, and then complete the following:</p><ul><li>Power on <strong>adminbox</strong> and when prompted, browse to the Ubuntu iso you just downloaded and click <strong>Start</strong></li><li>Select the language</li><li>Choose whether to update to the new installer or not (I do)</li><li>Select the keyboard layout</li><li>The ethernet adapter enp0s3, we&rsquo;ll want to set a static IP for. You can complete this now or later. To do now continue as follows<ul><li>Edit IPv4 > Manual</li><li><strong>Subnet</strong>: 10.0.2.0/24</li><li><strong>Address</strong>: 10.0.2.5</li><li><strong>Gateway</strong>: 10.0.2.2</li><li><strong>Name servers</strong>: 8.8.8.8</li><li><strong>Search Domains</strong>: <em>Leave blank</em>
<img loading=lazy src=images/staticIP.png alt=staticIP>
<img loading=lazy src=images/staticIP2.png alt=staticIP2></li></ul></li><li>Leave the proxy address blank</li><li>Leave the Mirror address as is</li><li>Select to use the entire disk and confirm to contine the install process</li><li>Enter your name</li><li>The server name of <strong>adminbox</strong></li><li>And then enter a username and password</li><li>Select to <strong>Install OpenSSH server</strong></li><li>Do not select any other Feature Server Snaps</li><li>Reboot the server once complete</li></ul><blockquote><p>Note: You may want to shutdown the server upon first boot due to unmount /cdrom errors.</p></blockquote><h2 id=update-ubuntu>Update Ubuntu<a hidden class=anchor aria-hidden=true href=#update-ubuntu>#</a></h2><p>Once you have booted up and logged into Ubuntu for the first time, update it as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt update <span style=color:#f92672>&amp;&amp;</span> sudo apt install -y
</span></span></code></pre></div><h2 id=set-static-ip>Set Static IP<a hidden class=anchor aria-hidden=true href=#set-static-ip>#</a></h2><p>If you skipped the part to configure the static IP in the setup, it can be done from within the Ubuntu terminal as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Get the name of the adapter</span>
</span></span><span style=display:flex><span>ip link
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Get the name of the yml in netplan</span>
</span></span><span style=display:flex><span>ls /etc/netplan
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Get the contents of it</span>
</span></span><span style=display:flex><span>cat /etc/netplan/00-installer-config.yml
</span></span></code></pre></div><p>This is what the yml file will show if it is set to dhcp. Adapter enp0s3 is the Nat adapter and enp0s8 is the adapter which is bridged to the host.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#75715e># This is the network config written by &#39;subiquity&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>network</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>ethernets</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>enp0s3</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>dhcp4</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>enp0s8</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>dhcp4</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>version</span>: <span style=color:#ae81ff>2</span>
</span></span></code></pre></div><p>Change it with vi, vim, or nano</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo vi /etc/netplan/00-installer-config.yml
</span></span></code></pre></div><p>And fill in as follows (Be careful to use proper indentation):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#75715e># This is the network config written by &#39;subiquity&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>network</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>ethernets</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>enp0s3</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>addresses</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>10.0.2.5</span><span style=color:#ae81ff>/24</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>gateway4</span>: <span style=color:#ae81ff>10.0.2.2</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>nameservers</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>addresses</span>:
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>8.8.8.8</span>
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>8.8.8.8</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>search</span>: []
</span></span><span style=display:flex><span>    <span style=color:#f92672>enp0s8</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>dhcp4</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>version</span>: <span style=color:#ae81ff>2</span>
</span></span></code></pre></div><p>Save and exit the text editor, then type the following to apply the changes:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo netplan apply
</span></span></code></pre></div><p>Get the ip addresses by typing the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ip addr show
</span></span></code></pre></div><h2 id=update-the-hosts-file>Update the hosts File<a hidden class=anchor aria-hidden=true href=#update-the-hosts-file>#</a></h2><p>Updating the hosts files on your local machine allows for communication over hostname rather than IP address. Change the hosts file on your local machine as follows:</p><pre tabindex=0><code class=language-terminal data-lang=terminal>sudo vi /etc/hosts
</code></pre><p>Add the ip address for your enp0s8 adapter which you can get from the <code>ip addr show</code> command:</p><pre tabindex=0><code class=language-terminal data-lang=terminal># adminbox ip
192.168.178.93    adminbox
</code></pre><h2 id=generate-a-ssh-key-pair>Generate a SSH Key Pair<a hidden class=anchor aria-hidden=true href=#generate-a-ssh-key-pair>#</a></h2><p>To enable us to easily access the adminbox from the host OS for system administration, we can easily setup a SSH key-pair as follows:</p><p>From the host OS, create the ssh key-pair as follows:</p><pre tabindex=0><code class=language-terminal data-lang=terminal>ssh-keygen -t rsa -b 4096
</code></pre><p>Press Enter to accept the key to be saved in <code>~/.ssh</code> and do not specify a passphrase. Then use the following command to copy to adminbox:</p><pre tabindex=0><code class=language-termial data-lang=termial>ssh-copy-id mark@adminbox
</code></pre><blockquote><p>Note: mark is my username</p></blockquote><p>Test by connecting to the machine via SSH:</p><pre tabindex=0><code class=language-terminal data-lang=terminal>ssh mark@adminbox
</code></pre><h2 id=summary>Summary<a hidden class=anchor aria-hidden=true href=#summary>#</a></h2><p>We&rsquo;ve now successfully built the adminbox server in VirtualBox, have updated it and can SSH onto it. This will allow us access from the host machine, access to the internet, and access to future VMs created in the NAT network.</p><p>That concludes part 1 of this series.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://markkerry.github.io/tags/linux/>Linux</a></li><li><a href=https://markkerry.github.io/tags/ubuntu/>Ubuntu</a></li><li><a href=https://markkerry.github.io/tags/virtualbox/>VirtualBox</a></li></ul><nav class=paginav><a class=prev href=https://markkerry.github.io/posts/2022/02/acr-push-pull/><span class=title>Â« Prev Page</span><br><span>Quick How-to: Push/Pull to Azure Container Registry</span></a>
<a class=next href=https://markkerry.github.io/posts/2022/01/learning-c/><span class=title>Next Page Â»</span><br><span>Introduction to C Programming</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://markkerry.github.io/>markkerry.github.io</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>