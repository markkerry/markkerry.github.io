<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Azure ARM Templates - Part 2: Testing | markkerry.github.io</title><meta name=keywords content="Azure,ARM Templates,IaC,Pester,PowerShell,Arm-ttk"><meta name=description content="Following on from authoring the Azure ARM Templates - Part 1: Development post, in this one I will cover testing the ARM template.
Two potential ways to test the ARM templates is by manually building a Pester test, and another is by using Microsoft&rsquo;s Azure Resource Manager Template Toolkit (arm-ttk) module.
You can run local tests against ARM templates using PowerShell - which I will demonstrate in the post - but most commonly template testing and validating is used during a CI pipeline."><meta name=author content="Mark kerry"><link rel=canonical href=https://markkerry.github.io/posts/2021/07/azure-arm-templates-part-2-testing/><link crossorigin=anonymous href=/assets/css/stylesheet.min.b9ff4cc257e914dab489bd18086151800e18f91456a5174bf28489210227a659.css integrity="sha256-uf9MwlfpFNq0ib0YCGFRgA4Y+RRWpRdL8oSJIQInplk=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://markkerry.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://markkerry.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://markkerry.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://markkerry.github.io/apple-touch-icon.png><link rel=mask-icon href=https://markkerry.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.98.0"><script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config",'')</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZDLE8M8RG"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XZDLE8M8RG",{anonymize_ip:!1})}</script><meta property="og:title" content="Azure ARM Templates - Part 2: Testing"><meta property="og:description" content="Following on from authoring the Azure ARM Templates - Part 1: Development post, in this one I will cover testing the ARM template.
Two potential ways to test the ARM templates is by manually building a Pester test, and another is by using Microsoft&rsquo;s Azure Resource Manager Template Toolkit (arm-ttk) module.
You can run local tests against ARM templates using PowerShell - which I will demonstrate in the post - but most commonly template testing and validating is used during a CI pipeline."><meta property="og:type" content="article"><meta property="og:url" content="https://markkerry.github.io/posts/2021/07/azure-arm-templates-part-2-testing/"><meta property="og:image" content="https://markkerry.github.io/images/cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-07-03T15:50:08+01:00"><meta property="article:modified_time" content="2021-07-03T15:50:08+01:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://markkerry.github.io/images/cover.png"><meta name=twitter:title content="Azure ARM Templates - Part 2: Testing"><meta name=twitter:description content="Following on from authoring the Azure ARM Templates - Part 1: Development post, in this one I will cover testing the ARM template.
Two potential ways to test the ARM templates is by manually building a Pester test, and another is by using Microsoft&rsquo;s Azure Resource Manager Template Toolkit (arm-ttk) module.
You can run local tests against ARM templates using PowerShell - which I will demonstrate in the post - but most commonly template testing and validating is used during a CI pipeline."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://markkerry.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Azure ARM Templates - Part 2: Testing","item":"https://markkerry.github.io/posts/2021/07/azure-arm-templates-part-2-testing/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Azure ARM Templates - Part 2: Testing","name":"Azure ARM Templates - Part 2: Testing","description":"Following on from authoring the Azure ARM Templates - Part 1: Development post, in this one I will cover testing the ARM template.\nTwo potential ways to test the ARM templates is by manually building a Pester test, and another is by using Microsoft\u0026rsquo;s Azure Resource Manager Template Toolkit (arm-ttk) module.\nYou can run local tests against ARM templates using PowerShell - which I will demonstrate in the post - but most commonly template testing and validating is used during a CI pipeline.","keywords":["Azure","ARM Templates","IaC","Pester","PowerShell","Arm-ttk"],"articleBody":"Following on from authoring the Azure ARM Templates - Part 1: Development post, in this one I will cover testing the ARM template.\nTwo potential ways to test the ARM templates is by manually building a Pester test, and another is by using Microsoft’s Azure Resource Manager Template Toolkit (arm-ttk) module.\nYou can run local tests against ARM templates using PowerShell - which I will demonstrate in the post - but most commonly template testing and validating is used during a CI pipeline.\nPester Pester is designed for testing and mocking PowerShell code, and is really commonly used in CI pipelines. But that’s not what we are using it for here. If something can be achieved in PowerShell, then you can use Pester to evaluate the results to see if they match what you are expecting. So essentially we are asking Pester to get the content of the json file using PowerShell, and then validate the elements, resources, file format etc, to ensure they are all what we are expecting.\nIn the same directory as your ARM template and parameters file, create a new file called NewVM.test.ps1. Then paste the contents of the code below into the NewVM.test.ps1 file.\nDescribe 'ARM Template Validation' {   BeforeAll {  $TemplatePath = \"C:\\git\\repos\\arm-templates\\NewVM\\NewVM.json\"  $templateRaw = Get-Content -Path $TemplatePath -Raw -ErrorAction SilentlyContinue  $template = ConvertFrom-Json -InputObject $templateRaw -ErrorAction SilentlyContinue  }   Context 'File Validation' {  It 'Template ARM file exists' {  Test-Path $TemplatePath -Include \"*.json\" | Should -Be $true  }  It 'Is a valid JSON file' {  $templateRaw | ConvertFrom-Json -ErrorAction SilentlyContinue | Should -Not -Be $null  }  }   Context 'Template Content Validation' {  It 'Contains all required elements' {  $elements = '$schema',  'contentVersion',  'functions',  'outputs',  'parameters',  'resources',  'variables'  $templateElements = $template | Get-Member -MemberType NoteProperty | ForEach-Object Name  $templateElements | Should -Be $elements  }  It 'Creates the expected resources' {  $resources = 'Microsoft.Storage/storageAccounts',  'Microsoft.Network/publicIPAddresses',  'Microsoft.Network/networkSecurityGroups',  'Microsoft.Network/virtualNetworks',  'Microsoft.Network/networkInterfaces',  'Microsoft.Compute/virtualMachines'  $templateResources = $template.resources.type  $templateResources | Should -Be $resources  }  } } Use the following commands to import the already installed Pester module and run the tests.\n# Change directory to the location of the pester file and ARM template cd \"c:\\git\\repos\\Arm\\NewVM\"  # Import the Pester module Import-Module -Name Pester  # Run invoke-pester to run every *.test.ps1 file in the current directory Invoke-Pester -Output Detailed The pester test breaks down as follows:\n Before each test it gets the content of the json and converts it from json First test validates the json file exists Second test checks it is valid json format Third test checks all required elements exist in the template Fourth test ensures all resources we want to deploy are specified in the template  As you can see below the all four tests pass successfully.\nAzure Resource Manager Template Toolkit The arm-ttk is a much more enterprise ready solution with active open source development. The following is from the Azure Resource Manager Template Toolkit (arm-ttk) GitHub repo.\nA little bit about the tests… These are the tests that are used to validate templates for the Azure QuickStart Repo and the Azure Marketplace. The purpose is to ensure a standard or consistent set of coding practices to make it easier to develop expertise using the template language (easy to read, write, debug).\nMore examples of using the arm-ttk can be found here\nTo get started, browse to https://github.com/Azure/arm-ttk and select Code and then Download ZIP. Then extract the contents of the ZIP to the directory of your choosing.\nOpen PowerShell and run the following commands to import the module and run the tests.\n# download the module from github and extract to directory of choice cd \"c:\\git\\src\\arm-ttk\"  # Import the arm-ttk module Import-Module .\\arm-ttk.psd1 -Force  # Change directory to the location of the ARM template cd \"c:\\git\\repos\\Arm\\NewVM\"  # Run the arm-ttk  Test-AzTemplate -TemplatePath .\\NewVM.json  # Run the test again only this time show the failures $x = Test-AzTemplate -TemplatePath .\\NewVM.json $x | ? { -not $_.passed }  # You can skip certain failures you are not concerned about Test-AzTemplate -TemplatePath .\\NewVM.json -skip apiVersions-Should-Be-Recent, ResourceIds-should-not-contain You can see the results of the above commands below:\nSummary The above solutions are two ways to validate the contents of your ARM templates locally. In the next post I will cover deploying the ARM template using the PowerShell Azure Az module.\n","wordCount":"710","inLanguage":"en","image":"https://markkerry.github.io/images/cover.png","datePublished":"2021-07-03T15:50:08+01:00","dateModified":"2021-07-03T15:50:08+01:00","author":{"@type":"Person","name":"Mark kerry"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://markkerry.github.io/posts/2021/07/azure-arm-templates-part-2-testing/"},"publisher":{"@type":"Organization","name":"markkerry.github.io","logo":{"@type":"ImageObject","url":"https://markkerry.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://markkerry.github.io/ accesskey=h title="markkerry.github.io (Alt + H)">markkerry.github.io</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://markkerry.github.io/about/ title=About><span>About</span></a></li><li><a href=https://markkerry.github.io/archive title=Archive><span>Archive</span></a></li><li><a href=https://markkerry.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://markkerry.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://markkerry.github.io/posts/>Posts</a></div><h1 class=post-title>Azure ARM Templates - Part 2: Testing</h1><div class=post-meta>July 3, 2021&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Mark kerry</div></header><figure class=entry-cover><img loading=lazy srcset="https://markkerry.github.io/posts/2021/07/azure-arm-templates-part-2-testing/images/cover_hu982d4e825f3c4787d83bcb8388542dbc_22917_360x0_resize_box_3.png 360w ,https://markkerry.github.io/posts/2021/07/azure-arm-templates-part-2-testing/images/cover_hu982d4e825f3c4787d83bcb8388542dbc_22917_480x0_resize_box_3.png 480w ,https://markkerry.github.io/posts/2021/07/azure-arm-templates-part-2-testing/images/cover.png 662w" sizes="(min-width: 768px) 720px, 100vw" src=https://markkerry.github.io/posts/2021/07/azure-arm-templates-part-2-testing/images/cover.png alt width=662 height=346><p>Part 2 in developing, testing and deploying Azure ARM templates</p></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner><ul><li><a href=#pester aria-label=Pester>Pester</a></li><li><a href=#azure-resource-manager-template-toolkit aria-label="Azure Resource Manager Template Toolkit">Azure Resource Manager Template Toolkit</a></li><li><a href=#summary aria-label=Summary>Summary</a></li></ul></div></details></div><div class=post-content><p>Following on from authoring the <a href=https://markkerry.github.io/posts/2021/06/azure-arm-templates-part-1-development/>Azure ARM Templates - Part 1: Development</a> post, in this one I will cover testing the ARM template.</p><p>Two potential ways to test the ARM templates is by manually building a <a href=https://pester.dev/docs/quick-start>Pester</a> test, and another is by using Microsoft&rsquo;s <a href=https://github.com/Azure/arm-ttk>Azure Resource Manager Template Toolkit</a> (arm-ttk) module.</p><p>You can run local tests against ARM templates using PowerShell - which I will demonstrate in the post - but most commonly template testing and validating is used during a CI pipeline.</p><h2 id=pester>Pester<a hidden class=anchor aria-hidden=true href=#pester>#</a></h2><p>Pester is designed for testing and mocking PowerShell code, and is really commonly used in CI pipelines. But that&rsquo;s not what we are using it for here. If something can be achieved in PowerShell, then you can use Pester to evaluate the results to see if they match what you are expecting. So essentially we are asking Pester to get the content of the json file using PowerShell, and then validate the elements, resources, file format etc, to ensure they are all what we are expecting.</p><p>In the same directory as your ARM template and parameters file, create a new file called <code>NewVM.test.ps1</code>. Then paste the contents of the code below into the NewVM.test.ps1 file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>Describe <span style=color:#e6db74>&#39;ARM Template Validation&#39;</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    BeforeAll {
</span></span><span style=display:flex><span>        $TemplatePath = <span style=color:#e6db74>&#34;C:\git\repos\arm-templates\NewVM\NewVM.json&#34;</span>
</span></span><span style=display:flex><span>        $templateRaw = Get-Content -Path $TemplatePath -Raw -ErrorAction SilentlyContinue
</span></span><span style=display:flex><span>        $template = ConvertFrom-Json -InputObject $templateRaw -ErrorAction SilentlyContinue
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Context <span style=color:#e6db74>&#39;File Validation&#39;</span> {
</span></span><span style=display:flex><span>        It <span style=color:#e6db74>&#39;Template ARM file exists&#39;</span> {
</span></span><span style=display:flex><span>            Test-Path $TemplatePath -Include <span style=color:#e6db74>&#34;*.json&#34;</span> | Should -Be $true
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        It <span style=color:#e6db74>&#39;Is a valid JSON file&#39;</span> {
</span></span><span style=display:flex><span>            $templateRaw | ConvertFrom-Json -ErrorAction SilentlyContinue | Should <span style=color:#f92672>-Not</span> -Be $null
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Context <span style=color:#e6db74>&#39;Template Content Validation&#39;</span> {
</span></span><span style=display:flex><span>        It <span style=color:#e6db74>&#39;Contains all required elements&#39;</span> {
</span></span><span style=display:flex><span>            $elements = <span style=color:#e6db74>&#39;$schema&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;contentVersion&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;functions&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;outputs&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;parameters&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;resources&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;variables&#39;</span>
</span></span><span style=display:flex><span>            $templateElements = $template | Get-Member -MemberType NoteProperty | ForEach-Object Name
</span></span><span style=display:flex><span>            $templateElements | Should -Be $elements
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        It <span style=color:#e6db74>&#39;Creates the expected resources&#39;</span> {
</span></span><span style=display:flex><span>            $resources = <span style=color:#e6db74>&#39;Microsoft.Storage/storageAccounts&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;Microsoft.Network/publicIPAddresses&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;Microsoft.Network/networkSecurityGroups&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;Microsoft.Network/virtualNetworks&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;Microsoft.Network/networkInterfaces&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;Microsoft.Compute/virtualMachines&#39;</span>
</span></span><span style=display:flex><span>            $templateResources = $template.resources.type
</span></span><span style=display:flex><span>            $templateResources | Should -Be $resources
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Use the following commands to import the already installed Pester module and run the tests.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span><span style=color:#75715e># Change directory to the location of the pester file and ARM template</span>
</span></span><span style=display:flex><span>cd <span style=color:#e6db74>&#34;c:\git\repos\Arm\NewVM&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Import the Pester module</span>
</span></span><span style=display:flex><span>Import-Module -Name Pester
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Run invoke-pester to run every *.test.ps1 file in the current directory</span>
</span></span><span style=display:flex><span>Invoke-Pester -Output Detailed
</span></span></code></pre></div><p>The pester test breaks down as follows:</p><ul><li>Before each test it gets the content of the json and converts it from json</li><li>First test validates the json file exists</li><li>Second test checks it is valid json format</li><li>Third test checks all required elements exist in the template</li><li>Fourth test ensures all resources we want to deploy are specified in the template</li></ul><p>As you can see below the all four tests pass successfully.</p><p><img loading=lazy src=images/pester.gif alt=pester></p><h2 id=azure-resource-manager-template-toolkit>Azure Resource Manager Template Toolkit<a hidden class=anchor aria-hidden=true href=#azure-resource-manager-template-toolkit>#</a></h2><p>The arm-ttk is a much more enterprise ready solution with active open source development. The following is from the <a href=https://github.com/Azure/arm-ttk#philosophy>Azure Resource Manager Template Toolkit (arm-ttk)</a> GitHub repo.</p><p><em>A little bit about the tests&mldr; These are the tests that are used to validate templates for the Azure QuickStart Repo and the Azure Marketplace. The purpose is to ensure a standard or consistent set of coding practices to make it easier to develop expertise using the template language (easy to read, write, debug).</em></p><p>More examples of using the arm-ttk can be found <a href=https://github.com/Azure/arm-ttk/blob/master/arm-ttk/README.md>here</a></p><p>To get started, browse to <a href=https://github.com/Azure/arm-ttk>https://github.com/Azure/arm-ttk</a> and select <strong>Code</strong> and then <strong>Download ZIP</strong>. Then extract the contents of the ZIP to the directory of your choosing.</p><p><img loading=lazy src=images/armttkRepo.png alt=armttkRepo></p><p>Open PowerShell and run the following commands to import the module and run the tests.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span><span style=color:#75715e># download the module from github and extract to directory of choice</span>
</span></span><span style=display:flex><span>cd <span style=color:#e6db74>&#34;c:\git\src\arm-ttk&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Import the arm-ttk module</span>
</span></span><span style=display:flex><span>Import-Module .\arm-ttk.psd1 -Force
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Change directory to the location of the ARM template</span>
</span></span><span style=display:flex><span>cd <span style=color:#e6db74>&#34;c:\git\repos\Arm\NewVM&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Run the arm-ttk </span>
</span></span><span style=display:flex><span>Test-AzTemplate -TemplatePath .\NewVM.json
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Run the test again only this time show the failures</span>
</span></span><span style=display:flex><span>$x = Test-AzTemplate -TemplatePath .\NewVM.json
</span></span><span style=display:flex><span>$x | ? { <span style=color:#f92672>-not</span> $_.passed }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># You can skip certain failures you are not concerned about</span>
</span></span><span style=display:flex><span>Test-AzTemplate -TemplatePath .\NewVM.json -skip apiVersions-Should-Be-Recent, ResourceIds-should<span style=color:#f92672>-not</span>-contain 
</span></span></code></pre></div><p>You can see the results of the above commands below:</p><p><img loading=lazy src=images/armttk.gif alt=armttk></p><h2 id=summary>Summary<a hidden class=anchor aria-hidden=true href=#summary>#</a></h2><p>The above solutions are two ways to validate the contents of your ARM templates locally. In the next post I will cover deploying the ARM template using the PowerShell Azure Az module.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://markkerry.github.io/tags/azure/>Azure</a></li><li><a href=https://markkerry.github.io/tags/arm-templates/>ARM Templates</a></li><li><a href=https://markkerry.github.io/tags/iac/>IaC</a></li><li><a href=https://markkerry.github.io/tags/pester/>Pester</a></li><li><a href=https://markkerry.github.io/tags/powershell/>PowerShell</a></li><li><a href=https://markkerry.github.io/tags/arm-ttk/>Arm-ttk</a></li></ul><nav class=paginav><a class=prev href=https://markkerry.github.io/posts/2021/07/azure-arm-templates-part-3-deployment/><span class=title>« Prev Page</span><br><span>Azure ARM Templates - Part 3: Deployment</span></a>
<a class=next href=https://markkerry.github.io/posts/2021/06/azure-arm-templates-part-1-development/><span class=title>Next Page »</span><br><span>Azure ARM Templates - Part 1: Development</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://markkerry.github.io/>markkerry.github.io</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>